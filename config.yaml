# PTZ Camera Object Tracking System - Configuration File

# Video Input/Output
video:
  input_path: "input.mp4"
  output_path: "output.mp4"
  output_codec: "mp4v"  # Options: mp4v, X264, MJPG
  save_output: true
  loop_playback: false
  process_every_n_frames: 1  # Process every frame (1 = all frames)

# Background Subtraction
background_subtraction:
  library: "opencv"  # Options: opencv, bgslibrary
  algorithm: "MOG2"  # OpenCV: MOG2, KNN, MOG, GMG, CNT | BGSLibrary: FrameDifference, ViBe, SuBSENSE, PAWCS, etc.

  # OpenCV-specific parameters
  history: 500
  var_threshold: 16.0  # For MOG2
  dist2_threshold: 400.0  # For KNN
  detect_shadows: true
  learning_rate: -1  # -1 for automatic, or 0.001-0.1

# Morphological Processing
morphology:
  enable: true
  kernel_size: 5  # 3, 5, 7, 9, etc.
  kernel_shape: "rect"  # Options: rect, ellipse, cross
  use_gaussian_blur: true
  gaussian_kernel_size: 3
  threshold_value: 130

# Object Detection
object_detection:
  min_area: 500  # Minimum contour area in pixels
  max_area_fraction: 0.3  # Maximum area as fraction of frame (0.0-1.0)
  min_aspect_ratio: 0.2
  max_aspect_ratio: 5.0
  min_solidity: 0.3
  min_extent: 0.2
  selection_strategy: "largest"  # Options: largest, center, previous

# Tracking
tracking:
  acquisition_frames: 3  # Consecutive detections required to start tracking
  lost_frames_threshold: 10  # Frames before declaring tracking lost
  recovery_timeout: 5.0  # Seconds
  deadband_x: 0.05  # Horizontal deadband (fraction of frame width)
  deadband_y: 0.05  # Vertical deadband (fraction of frame height)

# PTZ Control
ptz_control:
  pan_sensitivity: 45.0  # Degrees per normalized unit
  tilt_sensitivity: 30.0  # Degrees per normalized unit
  max_pan_speed: 2.0  # Degrees per frame
  max_tilt_speed: 1.5  # Degrees per frame
  min_zoom: 1.0
  max_zoom: 5.0
  zoom_speed: 0.05  # Zoom change per frame
  smoothing_factor: 0.3  # 0.0-1.0, higher = more smoothing
  target_object_size: 0.3  # Target object size as fraction of frame

# Display
display:
  show_window: true
  window_name: "PTZ Tracking"
  window_mode: "normal"  # Options: normal, fullscreen
  show_bounding_box: true
  show_crosshair: true
  show_info_overlay: true
  show_trajectory: false
  show_original: false  # Show original frame in separate window
  show_mask: false  # Show foreground mask in separate window
  output_width: null  # null = same as input
  output_height: null  # null = same as input

# Rendering
rendering:
  interpolation: "linear"  # Options: nearest, linear, cubic, lanczos4, area
  font_scale: 0.6
  font_thickness: 2
  line_thickness: 2

# Logging
logging:
  level: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR
  log_to_file: true
  log_file: "logs/tracking.log"
  save_telemetry: true
  telemetry_file: "logs/telemetry.csv"

[project]
name = "ptz-tracker"
version = "0.1.0"
description = "PTZ Camera Object Tracking System with Background Subtraction"
authors = [{name = "PTZ Tracker Team", email = "info@example.com"}]
requires-python = ">=3.8,<3.12"
readme = "TECHNICAL_SPECIFICATIONS.md"
license = {text = "MIT"}

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["linux-64", "osx-arm64", "osx-64", "win-64"]

[tool.pixi.pypi-dependencies]
pybgs = "*"      # BGSLibrary - only available on PyPI
norfair = "*"    # Multi-object tracking library

[tool.pixi.dependencies]
python = ">=3.8,<3.12"
opencv = ">=4.5"
numpy = ">=1.19"
pyyaml = ">=5.0"

[tool.pixi.feature.viz.dependencies]
matplotlib = ">=3.5"
pandas = ">=1.3"

[tool.pixi.feature.dev.dependencies]
ipython = "*"
pytest = ">=7.0"

# Tasks for common operations
[tool.pixi.tasks]
# Run the main tracking application
track = "python main.py"

# Run with specific config
track-config = "python main.py --config config.yaml"

# Run with custom input/output
track-video = "python main.py --input ${INPUT_VIDEO:-input.mp4} --output ${OUTPUT_VIDEO:-output.mp4}"

# Run tests
test = "pytest tests/"

# Interactive Python shell
shell = "ipython"

# Clean generated files (cross-platform)
clean = {cmd = "python -c \"import shutil, pathlib; [shutil.rmtree(p, ignore_errors=True) for p in [pathlib.Path('output'), pathlib.Path('logs')]]\""}

# Show version info
version = "python --version && python -c \"import cv2, numpy; print(f'OpenCV: {cv2.__version__}'); print(f'NumPy: {numpy.__version__}')\""

[tool.pixi.environments]
default = {solve-group = "default"}
viz = {features = ["viz"], solve-group = "default"}
dev = {features = ["dev", "viz"], solve-group = "default"}
